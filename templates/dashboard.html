<!DOCTYPE html>
<html>
<head>
    <title>Bellevue_Dashboard</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

<div class="navbar">
    <div class="nav-left">
        <strong>IT Bellevue Support</strong>
    </div>

    <div class="nav-right">
        Logged in as: {{ session['user'] }}
        <a href="/dashboard">Dashboard</a>
        <a href="/log_issue">Log Issue</a>
        <a href="/view_issues">Issues</a>
        <a href="/logout">Logout</a>
    </div>
</div>

<div class="container">
    <h2>IT Support Bellevue</h2>

    <!-- STAT CARDS -->
    <div class="stats">
        <div class="card">
            <strong>Total Issues Today</strong>
            <span class="total">{{ total }}</span>
        </div>

        <div class="card">
            <strong>Pending Issues</strong>
            <span class="pending">{{ pending }}</span>
        </div>

        <div class="card">
            <strong>Solved Issues</strong>
            <span class="solved">{{ solved }}</span>
        </div>
    </div>

    <!-- CHART SECTION -->
    <div class="chart-container">
        <canvas id="issueChart"></canvas>
    </div>

    <hr>

    <div class="action-buttons">
        <a class="btn btn-primary" href="/log_issue">Log New Issue</a>
        <a class="btn btn-success" href="/view_issues">View Issues</a>
        <a class="btn btn-danger" href="/logout">Logout</a>
    </div>

</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
const ctx = document.getElementById('issueChart');

new Chart(ctx, {
    type: 'doughnut',
    data: {
        labels: ['Open', 'Closed'],
        datasets: [{
            data: [{{ pending }}, {{ solved }}]
        }]
    },
    options: {
        responsive: true,
        maintainAspectRatio: false
    }
});
</script>

</body>
</html>
